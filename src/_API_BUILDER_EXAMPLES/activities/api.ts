import { ApiBuilder } from "../../API_BUILDER";
import { ACTIVITY_BY_ID_DTO } from "../../constants";
import { utilUserGetCurrentCoordinates } from "../../utils";

export const apiOnlineActivities = new ApiBuilder({
	basUrl: "/activities",
	apiName: "apiOnlineActivities",
	methods: {
		getInfinite: {
			type: "useApiInfiniteQuery",
			queryProps: { accessDataName: "activities" },
			paramsDTO: {
				id: "string",
				startDate: new Date(),
				endDate: new Date(),
				pageSize: 0,
				search: "string",
			},
			responseDTOInfiniteQueryArrayInner: {
				id: "c57370e7-8ee3-4c33-cac5-08ddeea74cfb",
				name: "0TEST ACOPY 123 | 11111111 111",
				activityStatusId: 1,
				activityStatusName: "Запланированная",
				startDatePlan: "2025-09-16T07:30:00",
				endDatePlan: "2025-09-16T07:45:00",
				startDateFact: "string",
				endDateFact: "string",
				comment: "string",
				utcDiff: 2,
				isAuthor: true,
				authorName: "string",
				isCurrentUserInActivityGroups: false,
				isGroupActivity: false,
				activityRateStatusColor: "string",
			},
		},
		getInfiniteForOneById: {
			type: "useApiInfiniteQuery",
			queryProps: { accessDataName: "activities", isOnlySingleItem: true },
			paramsDTO: { id: "string" },
			responseDTOInfiniteQueryArrayInner: ACTIVITY_BY_ID_DTO,
		},
		getInfiniteForCurrent: {
			type: "useApiInfiniteQuery",
			queryProps: { accessDataName: "activities", params: { showCurrent: true } },
			paramsDTO: { showCurrent: true },
			responseDTOInfiniteQueryArrayInner: ACTIVITY_BY_ID_DTO,
		},
		postOne: {
			type: "useApiMutation",
			queryProps: {
				method: "post",
				successMessage: "Активность создана!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: null,
			mutationResponseDTO: { data: "string" },
			mutationDTO: {
				activityAuditColleagues: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityColleagues: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityProducts: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityContacts: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				masterActivityFormTypeId: 0,
				activityMedias: [
					{
						materialId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						name: "string",
						extension: "string",
						fileData: "string",
					},
				],
				activityGuests: [
					{
						secondName: "string",
						firstName: "string",
						patronymic: "string",
					},
				],
				activityPolls: [
					{
						pollId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						startDate: "2025-08-01T09:43:19.854Z",
						endDate: "2025-08-01T09:43:19.854Z",
						userId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						contactWorkplaceId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						institutionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						activityPollResults: [
							{
								pollQuestionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerText: "string",
							},
						],
					},
				],
				activityPhotos: [
					{
						materialId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						name: "string",
						extension: "string",
						fileData: "string",
					},
				],
				marketingCyclePlanId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				userId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				activityTypeId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				activityStatusId: 0,
				name: "string",
				startDatePlan: "2025-08-01T09:43:19.854Z",
				endDatePlan: "2025-08-01T09:43:19.854Z",
				startDateFact: "2025-08-01T09:43:19.854Z",
				endDateFact: "2025-08-01T09:43:19.854Z",
				canceledDate: "2025-08-01T09:43:19.854Z",
				contactWorkplaceId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				institutionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				isHoleDay: true,
				fullAddress: "string",
				latitudePlan: 0,
				longitudePlan: 0,
				latitudeStart: 0,
				longitudeStart: 0,
				latitudeEnd: 0,
				longitudeEnd: 0,
				comment: "string",
				utcDiff: 0,
			},
		},
		putOneById: {
			type: "useApiMutation",
			queryProps: {
				method: "put",
				url: "/ ",
				successMessage: "Активность обновлена!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			mutationResponseDTO: null,
			urlReplaceParamsDTO: { id: "string" },
			mutationDTO: {
				activityAuditColleagues: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityColleagues: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityProducts: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityContacts: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityGuests: [
					{
						id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						secondName: "string",
						firstName: "string",
						patronymic: "string",
					},
				],
				activityPolls: [
					{
						id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						pollId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						startDate: "2025-08-01T09:43:48.779Z",
						endDate: "2025-08-01T09:43:48.779Z",
						userId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						contactWorkplaceId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						institutionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						activityPollResults: [
							{
								pollQuestionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerText: "string",
							},
						],
					},
				],
				marketingCyclePlanId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				userId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				activityTypeId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				activityStatusId: 0,
				name: "string",
				startDatePlan: "2025-08-01T09:43:48.779Z",
				endDatePlan: "2025-08-01T09:43:48.779Z",
				startDateFact: "2025-08-01T09:43:48.779Z",
				endDateFact: "2025-08-01T09:43:48.779Z",
				canceledDate: "2025-08-01T09:43:48.779Z",
				contactWorkplaceId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				institutionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				isHoleDay: true,
				fullAddress: "string",
				latitudePlan: 0,
				longitudePlan: 0,
				latitudeStart: 0,
				longitudeStart: 0,
				latitudeEnd: 0,
				longitudeEnd: 0,
				comment: "string",
				utcDiff: 0,
			},
		},
		patchOneById: {
			type: "useApiMutation",
			queryProps: {
				method: "patch",
				url: "/:id",
				successMessage: "Активность обновлена!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			mutationResponseDTO: null,
			urlReplaceParamsDTO: { id: "string" },
			mutationDTO: {
				comment: "string",
				activityProducts: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"],
				activityPolls: [
					{
						id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						pollId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						startDate: "2025-08-01T09:39:35.095Z",
						endDate: "2025-08-01T09:39:35.095Z",
						userId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						contactWorkplaceId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						institutionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						activityPollResults: [
							{
								pollQuestionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerText: "string",
							},
						],
					},
				],
			},
		},
		deleteOneById: {
			type: "useApiMutation",
			queryProps: {
				method: "delete",
				url: "/:id",
				successMessage: "Активность удалена!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: { id: "string" },
			mutationDTO: null,
			mutationResponseDTO: null,
		},
		actionPutByActivityId: {
			type: "useApiMutation",
			queryProps: {
				method: "put",
				url: "/:activityId/action",
				isSuccessMessage: false,
				getMethodData: async () => {
					const userCoords = await utilUserGetCurrentCoordinates();
					return {
						dateToAction: new Date(),
						latitudeFact: userCoords.latitude,
						longitudeFact: userCoords.longitude,
					};
				},
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: { activityId: "string" },
			mutationResponseDTO: null,
			mutationDTO: {
				action: 0,
				dateToAction: "2025-08-01T09:40:03.776Z",
				latitudeFact: 0,
				longitudeFact: 0,
			},
		},
		mediasPostByActivityId: {
			type: "useApiMutation",
			queryProps: {
				method: "post",
				url: "/:activityId/medias",
				successMessage: "Активность обновлена!",
				onSuccessInvalidateQueryKeys: [["apiOnlineActivities/getInfiniteOneById"]],
			},
			urlReplaceParamsDTO: { activityId: "string" },
			mutationResponseDTO: null,
			mutationDTO: [
				{
					id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
					materialId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
					name: "string",
					extension: "string",
					fileData: "string",
				},
			],
		},
		mediasDeleteOneByActivityIdAndMediaId: {
			type: "useApiMutation",
			queryProps: {
				method: "delete",
				url: "/:activityId/medias/:mediaId",
				successMessage: "Активность обновлена!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfiniteOneById", "apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: { activityId: "string", mediaId: "string" },
			mutationResponseDTO: null,
			mutationDTO: null,
		},
		photosPostByActivityId: {
			type: "useApiMutation",
			queryProps: {
				method: "post",
				url: "/:activityId/photos",
				successMessage: "Активность обновлена!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfiniteOneById", "apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: { activityId: "string" },
			mutationResponseDTO: null,
			mutationDTO: [
				{
					id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
					materialId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
					name: "string",
					extension: "string",
					fileData: "string",
				},
			],
		},
		activityPhotosDeleteOneByActivityIdAndPhotoId: {
			type: "useApiMutation",
			queryProps: {
				method: "delete",
				url: "/:id/photos/:photoId",
				successMessage: "Активность обновлена!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfiniteOneById", "apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: { activityId: "string", photoId: "string" },
			mutationResponseDTO: null,
			mutationDTO: null,
		},
		calcDistancePost: {
			type: "useApiMutation",
			queryProps: {
				method: "post",
				url: "/calc-distance",
				isSuccessMessage: false,
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfiniteOneById", "apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: null,
			mutationResponseDTO: { data: 0 },
			mutationDTO: {
				longitude_plan: 0,
				latitutde_plan: 0,
				longitude_fact: 0,
				latitutde_fact: 0,
			},
		},
		checkDateGet: {
			type: "useApiQuery",
			queryProps: { url: "/checkdate" },
			responseDTO: null,
			paramsDTO: null,
			urlReplaceParamsDTO: null,
		},
		copyPost: {
			type: "useApiMutation",
			queryProps: {
				method: "post",
				url: "/:id/copy",
				successMessage: "Активность скопирована!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: null,
			mutationDTO: [
				{
					id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
					startDatePlan: "2025-08-01T09:53:48.362Z",
					endDatePlan: "2025-08-01T09:53:48.362Z",
					utcDiff: 0,
				},
			],
			mutationResponseDTO: null,
		},
		historyGetInfinite: {
			type: "useApiInfiniteQuery",
			queryProps: { url: "/history", accessDataName: "activities" },
			paramsDTO: { showEnded: true },
			responseDTOInfiniteQueryArrayInner: {
				id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
				name: "string",
				activityStatusId: 0,
				activityStatusName: "string",
				startDatePlan: "2025-08-01T09:54:08.644Z",
				endDatePlan: "2025-08-01T09:54:08.644Z",
				startDateFact: "2025-08-01T09:54:08.644Z",
				endDateFact: "2025-08-01T09:54:08.644Z",
				comment: "string",
				utcDiff: 0,
				isAuthor: true,
				isCurrentUserInActivityGroups: true,
				isGroupActivity: true,
			},
		},
		pollsLastGet: {
			type: "useApiQuery",
			queryProps: { url: "/pollslast" },
			urlReplaceParamsDTO: null,
			paramsDTO: null,
			responseDTO: {
				data: [
					{
						pollId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						startDate: "2025-08-01T09:54:22.367Z",
						endDate: "2025-08-01T09:54:22.367Z",
						pollDonePercentage: 0,
						activityPollResults: [
							{
								activityPollId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								userId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								contactWorkplaceId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								institutionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollQuestionId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								pollAnswerText: "string",
								id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								updatedUserId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								deletedUserId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								createdUserId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
								updatedDate: "2025-08-01T09:54:22.367Z",
								deletedDate: "2025-08-01T09:54:22.367Z",
								createdDate: "2025-08-01T09:54:22.367Z",
							},
						],
						name: "string",
						id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						updatedUserId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						deletedUserId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						createdUserId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
						updatedDate: "2025-08-01T09:54:22.367Z",
						deletedDate: "2025-08-01T09:54:22.367Z",
						createdDate: "2025-08-01T09:54:22.367Z",
					},
				],
				success: true,
			},
		},
		transferPatch: {
			type: "useApiMutation",
			queryProps: {
				method: "patch",
				url: "/transfer",
				successMessage: "Активност(ь/и) обновлен(а/ы)!",
				onSuccessInvalidateQueryKeys: [
					["apiOnlineActivities/getInfinite"],
					["apiOnlineActivities/getInfiniteOneById"],
					["apiOnlineActivities/getInfiniteForCurrent"],
				],
			},
			urlReplaceParamsDTO: null,
			mutationResponseDTO: null,
			mutationDTO: [
				{
					id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
					startDatePlan: "2025-08-01T09:54:41.127Z",
					endDatePlan: "2025-08-01T09:54:41.127Z",
				},
			],
		},
	},
});
